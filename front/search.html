<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
		<script
			type="text/javascript"
			src="http://code.jquery.com/jquery-3.5.1.min.js"
		></script>
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
			rel="stylesheet"
		/>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
		<script src="apis.js"></script>
		<script src="setUser.js"></script>
		<script src="category.js"></script>
		<style>
			.navbar {
				height: 6rem;
			}

			.navbar-brand {
				font-size: 2rem;
			}
			body {
				background-color: rgb(233, 236, 239);
			}
			.main-container {
				background-color: white;
			}
			.board-title {
				padding: 0.8rem;
				text-align: center;
				color: gray;
				border: 1px solid rgb(233, 236, 239);
			}
			.board-content {
				padding: 0.4rem;
				border-bottom: 1px solid rgb(233, 236, 239);
				color: gray;
				cursor: pointer;
			}
		</style>
		<!-- 정적 페이지에서 주소창으로 paraemter 넘겨받는 법 -->
		<script type="text/javascript">
			var Request = function () {
				this.getParameter = function (name) {
					var rtnval = '';
					var nowAddress = decodeURI(location.href);
					// var nowAddress = location.href;
					var parameters = nowAddress
						.slice(nowAddress.indexOf('?') + 1, nowAddress.length)
						.split('&');
					for (var i = 0; i < parameters.length; i++) {
						var varName = parameters[i].split('=')[0];
						if (varName.toUpperCase() == name.toUpperCase()) {
							rtnval = parameters[i].split('=')[1];
							break;
						}
					}
					return rtnval;
				};
			};
			var request = new Request();
		</script>
		<script>
			var type = request.getParameter('type');
			var word = request.getParameter('word');
		</script>
	</head>
	<body>
		<!-- 헤더 -->
		<nav class="navbar navbar-expand-lg navbar-light bg-light">
			<div class="container-fluid">
				<a class="navbar-brand" href="index.html">KT-BOX</a>
				<button
					class="navbar-toggler"
					type="button"
					data-bs-toggle="collapse"
					data-bs-target="#navbarSupportedContent"
					aria-controls="navbarSupportedContent"
					aria-expanded="false"
					aria-label="Toggle navigation"
				>
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse" id="navbarSupportedContent">
					<ul class="navbar-nav me-auto mb-2 mb-lg-0">
						<li class="nav-item">
							<a class="nav-link active" aria-current="page" href="#">Home</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="#">MyPage</a>
						</li>
					</ul>
				</div>
				<form class="d-flex">
					<input
						class="form-control me-2 search"
						type="search"
						placeholder="Search"
						aria-label="Search"
					/>
					<button class="btn btn-outline-success search-btn" type="submit">
						Search
					</button>
				</form>
				<div class="myinfo">내정보:</div>
			</div>
		</nav>
		<div class="row" style="margin-top: 4rem">
			<div class="col">1</div>
			<div class="col-7 main-container">
				<p class="main-text"></p>
				<div class="row board-title">
					<div class="col-8">제목</div>
					<div class="col">카테고리</div>
					<div class="col">작성</div>
				</div>
				<div class="row board-contents"></div>
			</div>
			<div class="col">3</div>
		</div>
		<script>
			$(function () {
				var posts;
				posts = type === 'word' ? searchByWord(word) : searchByHashtag(word);
				console.log(posts);
				$('.main-text').append(
					`"${word}"에 대해 총 ${posts.length} 개의 검색 결과가 존재합니다.`
				);
				var target = $('.board-contents');
				target.empty();
				posts.forEach((post) => {
					target.append(
						$(
							`<div class="col-8 board-content" post-id=${post.id}>${post.title}</div>`
						)
					);
					target.append(
						$(
							`<div class="col board-content post-id=${post.id}">${post.category}</div>`
						)
					);
					target.append(
						$(
							`<div class="col board-content post-id=${post.id}">${post.createdAt}</div>`
						)
					);
				});
				$('.board-content').on('click', function () {
					console.log(this.getAttribute('post-id'));
					var postId = this.getAttribute('post-id');
					window.location.href = `post.html?postId=${postId}`;
				});
			});
		</script>
	</body>
</html>
